---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

interface Props {
  image: ImageMetadata | string;
  alt: string;
  badge?: {
    text: string;
    color?: 'sage' | 'terracotta' | 'gold';
  };
  title: string;
  reverse?: boolean;
  imageHeight?: string;
  class?: string;
}

const {
  image,
  alt,
  badge,
  title,
  reverse = false,
  imageHeight = 'min-h-80',
  class: className = '',
} = Astro.props;

const badgeColorClasses = {
  sage: 'bg-beaucharme-sage',
  terracotta: 'bg-beaucharme-terracotta',
  gold: 'bg-beaucharme-gold',
};

const badgeColor = badge?.color || 'terracotta';
---

<div class:list={['grid md:grid-cols-2 md:gap-8 shadow-md md:shadow-none rounded-2xl md:rounded-none overflow-hidden md:overflow-visible', className]}>
  <!-- Image Card -->
  <div class:list={[
    'relative md:rounded-2xl overflow-hidden md:shadow-md',
    imageHeight,
    reverse && 'md:order-2'
  ]}>
    {typeof image === 'string' ? (
      <img
        src={image}
        alt={alt}
        class="w-full h-full object-cover"
      />
    ) : (
      <Image
        src={image}
        alt={alt}
        width={800}
        height={600}
        class="w-full h-full object-cover"
      />
    )}
    {badge && (
      <div class:list={[
        'absolute top-4 left-4 text-white text-sm px-4 py-2 rounded-full',
        badgeColorClasses[badgeColor]
      ]}>
        {badge.text}
      </div>
    )}
  </div>

  <!-- Text Card -->
  <div class:list={[
    'bg-white md:rounded-2xl md:shadow-md p-8 md:p-10 flex flex-col justify-center',
    reverse && 'md:order-1'
  ]}>
    <h2 class="font-serif text-3xl md:text-4xl font-bold text-beaucharme-dark mb-6">
      {title}
    </h2>
    <div class="space-y-4 text-beaucharme-earth leading-relaxed">
      <slot />
    </div>
  </div>
</div>
