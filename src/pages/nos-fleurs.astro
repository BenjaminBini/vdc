---
import Layout from '@layouts/Layout.astro';
import Header from '@components/Header.astro';
import Footer from '@components/Footer.astro';
import CartSidebar from '@components/CartSidebar.tsx';
import PageContainer from '@components/PageContainer.astro';
import HeroCard from '@components/HeroCard.astro';
import BentoTitleCard from '@components/BentoTitleCard.astro';
import BentoCTACard from '@components/BentoCTACard.astro';
import plants from '@data/plants.json';
import { getPlantImage } from '@utils/images';

const baseUrl = import.meta.env.BASE_URL;

// Grid position classes for bento layout (10 plants)
const gridClasses = [
  'sm:col-span-2 md:row-span-2',  // bourrache - large
  'sm:col-span-2 md:col-span-2',  // cameline
  'sm:col-span-2 md:col-span-2',  // camomille
  'sm:col-span-2 md:col-span-2',  // carthame
  'sm:col-span-2 md:row-span-2',  // chanvre - large
  'sm:col-span-2 md:col-span-2',  // laurier
  'sm:col-span-2 md:col-span-2',  // lavandin
  'sm:col-span-2 md:row-span-2',  // menthe - large
  'sm:col-span-2 md:col-span-2',  // sauge
  'sm:col-span-2 md:col-span-2',  // tournesol
];
---

<Layout title="Nos Fleurs" description="Découvrez les 10 plantes cultivées sur notre ferme en Bourgogne pour créer nos cosmétiques naturels.">
  <PageContainer>
    <Header />

    <!-- Bento Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-6 gap-3 md:gap-4">
      <BentoTitleCard
        tagline="De notre ferme" 
        bg="sage"
        title="Nos Fleurs"
        description="10 plantes cultivées avec passion dans l'Yonne pour créer nos cosmétiques naturels."
        class="sm:col-span-2"
      />

      {plants.map((plant, index) => {
        const img = getPlantImage(plant.image);
        return (
          <HeroCard
            href={`${baseUrl}/nos-fleurs/${plant.id}`}
            media={img}
            alt={plant.name}
            class={`min-h-[200px] ${gridClasses[index]}`}
          >
            <div class="absolute inset-0 bg-gradient-to-t from-beaucharme-dark/80 via-beaucharme-dark/20 to-transparent" />
            <div class="absolute inset-0 p-5 md:p-6 flex flex-col justify-end">
              <span class="text-white/60 text-xs italic">{plant.latinName}</span>
              <h3 class="font-serif text-xl md:text-2xl font-semibold text-white mt-1">{plant.name}</h3>
              <p class="text-white/70 text-sm mt-1 line-clamp-2 hidden md:block">{plant.shortDescription}</p>
            </div>
          </HeroCard>
        );
      })}

      <BentoCTACard
        title="De la fleur au flacon"
        description="Découvrez comment nous transformons nos plantes en cosmétiques naturels."
        buttonText="En savoir plus"
        buttonHref={`${baseUrl}/de-la-fleur-au-flacon`}
        class="sm:col-span-2"
      />
    </div>

    <Footer />
    <CartSidebar client:load />
  </PageContainer>
</Layout>
